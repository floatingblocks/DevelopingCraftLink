# 一些注解

## 总体流程

现在写这个文档的时间是 2021 年 8 月 15 日。  
考虑到这个项目的 GUI 部分可能要到半年之后才能继续，怕自己到时候看不懂自己写的代码，搞不清自己要干的事情，趁着自己没有忘记，就先记下来一些细节。  

这个东西刚开始开发的时候是从 Glade 开始，没写代码，因此原来的 Glade 文件都在 Glades 文件夹里面，但不是最终版本。

原先目录高度模块化的，其中所有的原始代码都放在自己的独立文件夹里，每个文件夹子里面都是属于自己的东西，然后把 Glades 文件夹里面自己的 glade 拷贝过来，途中可能有些修改。

各个项目独立测试之后，我就建立了一个 MergeAll 文件夹，里面一堆 Glade 和一个 main.py，因为偷懒就把其他代码直接复制进来了，所有 glade 也放在里面，中间又经过很多修改，所以这才是最终版本。当然为了防止真的完全搞混了，我整了一堆 `begin::` 和 `end::`，从 Pescal 那里学来的，各个开始结束一一对应，方便拆。

以后开发就在 main.py 里面，搞完全部通过之后再分别拆开，不然开源出去给人喷死 :(

## 内核接口

接口自己为了写着爽随手编的，各种 Fake 打头的都是，这个代码我自信足够简洁，不用注释了。以后照着来就是。

当然语言部分还没全部搞进去，建议到时候统一改了放进一个 json 里面。

## 各个模块

各个模块都有自己没完成的部分，讲下重点。看到 pass 基本铁定是没搞完的，除了有些多余的 else（比如 Assistant里面的）。

### Assistant win

这个是完成度最高的，基本可以拿去直接用。流程是每页都在 on_AddNewPageWindow_apply() 函数里面进行判断跳转，最后给 parent（就是一个 notebook）加进去一个 page （客户端或者服务端）。

主要没搞好的就是每个 entry 的检查，因为内核没有好搞不了。

### ClientPage

完成的还可以，毕竟就是一个定时检查 + 按钮相应功能，简单地不能再简单了。

没完成的是接口函数，这个好像是没办法。

### ServerPage

完成度挺低的，说下需要的吧。

目前搞好的就是一个定时检查循环，还没测试定时检查时遍历列表的工作是否正常，不过自信应该没问题。  
同样缺少内核接口。  

server self actions 就是对自己的操作， server link action 是对选中的 link 的操作（就是显示在 tree 里面的）。  
各个操作都对应一个按钮，忘了就看看 glade 。
其中对自己的操作要开发两个子窗口：设置窗口，添加链接窗口，套个 dialog 应该就行了。  
对链接的看着名字来就行。最好加个右键菜单，每个键直接链接到按钮相同函数算了。  

### MainWin

终于到了主窗口。我可以很负责地说：它自己什么也不用干，只有一个框架，根本不会出 bug。

当然也缺少几个功能。要加上三个窗口：设置，疑难解答，关于。后两个可以考虑外链到 ghpage。

没拉！

## 最后

为了像一个完整的程序，最好加点程序该有的功能。什么系统托盘，通知之类都往上加好了。不过可以放在 update 里面。

大概就是这样了。内核完成后一星期内就能解决，少摸鱼一会可以三天搞完，不摸两天就行。
